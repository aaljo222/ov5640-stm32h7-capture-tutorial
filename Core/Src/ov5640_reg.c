/**
 ******************************************************************************
 * @file    ov5640_reg.c
 * @brief   OV5640 register configuration tables - WITH STREAMING START
 ******************************************************************************
 */

#include "ov5640_reg.h"

/* ============================================================
 * 1) Sensor Initialization Table
 * ============================================================ */
const ov5640_reg_t ov5640_init_reg[] =
{
    {0x3008, 0x42},   // Software power down
    {0x3103, 0x03},   // System clock from PLL
    {0x3008, 0x02},   // Software power up

    {0x3035, 0x21},
    {0x3036, 0x69},
    {0x3630, 0x36},
    {0x3631, 0x0e},
    {0x3632, 0xe2},
    {0x3633, 0x12},

    {0x3c01, 0xaa},
    {0x3c04, 0x28},
    {0x3c05, 0x98},
    {0x3c06, 0x00},
    {0x3c07, 0x08},

    {0x3820, 0x41},
    {0x3821, 0x07},

    {0x3002, 0x1c},
    {0x3006, 0xc3},
    {0x4713, 0x02},

    {0x4407, 0x04},
    {0x460b, 0x35},
    {0x460c, 0x20},

    {0x4837, 0x22},

    {0x3824, 0x02},
    {0x5001, 0xa3},

    /* End flag */
    {0xFFFF, 0xFF}
};


/* ============================================================
 * 2) RGB565 MODE
 * ============================================================ */
const ov5640_reg_t ov5640_rgb565_reg[] =
{
    {0x4300, 0x61},   // RGB565

    {0x501f, 0x00},
    {0x3002, 0x00},
    {0x3006, 0xff},
    {0x3821, 0x06},
    {0x3814, 0x31},
    {0x3815, 0x31},
    {0x3800, 0x00},
    {0x3801, 0x00},

    /* End flag */
    {0xFFFF, 0xFF}
};


/* ============================================================
 * 3) QQVGA (160x120) Windowing
 * ============================================================ */
const ov5640_reg_t ov5640_qqvga_reg[] =
{
    {0x3808, 0x00},   // DVP width  = 160
    {0x3809, 0xA0},
    {0x380A, 0x00},   // DVP height = 120
    {0x380B, 0x78},

    /* Scaling setup */
    {0x5001, 0xA3},
    {0x3821, 0x06},
    {0x3814, 0x31},
    {0x3815, 0x31},

    /* End flag */
    {0xFFFF, 0xFF}
};

/* ============================================================
 * 4) STREAMING START - 중요!
 * ============================================================ */
const ov5640_reg_t ov5640_streaming_start[] =
{
    {0x4202, 0x00},   // Stream ON (bit0 = 0)
    {0x300e, 0x45},   // Enable MIPI/DVP output
    {0x3008, 0x02},   // Normal mode (not standby)

    /* End flag */
    {0xFFFF, 0xFF}
};
